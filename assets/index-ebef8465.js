import{_ as f,u as w,f as M,m as b,U as d,g as y,o as c,c as u,a as t,t as n,b as h,j as m,i as p,v as _}from"./index-a881bc94.js";const k={computed:{translate(){const s=w();return s.initializeLocale(),e=>s.translate(e)}},data(){return{usernameDisabled:!0,emailDisabled:!0,phoneDisabled:!0,imageChange:!1,showSuccessMessage:!1,successMessage:"",showErrorMessage:!1,errorMessage:"",user:{username:"",password:"",phone:"",password:"",image:""}}},async created(){const s=M();await s.fill(),this.user=s.user,console.log(this.user)},methods:{toggleImageInput(){this.imageChange=!this.imageChange;const s=this.$refs.imageInput;if(this.imageChange)return;const e=s.files[0];if(!this.imageChange&&s.files.length>0&&["image/jpeg","image/jpg","image/png"].includes(e.type)){const o=new FileReader;o.onload=()=>{this.user.image=o.result,this.uploadImage(s.files[0])},o.readAsDataURL(e)}},handleImageChange(s){const e=s.target.files[0];if(["image/jpeg","image/jpg","image/png"].includes(e.type)){const o=new FileReader;o.onload=()=>{this.user.image=o.result},o.readAsDataURL(e)}},uploadImage(s){const e=new FormData;e.append("image",s),b.post("user/change/image",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then(l=>{this.successMessage=l.data.message,this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},5e3)}).catch(l=>{this.errorMessage=l.response.data.error,this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},5e3)})},async toggleUsernameInput(){if(!this.usernameDisabled){const s={username:this.user.username};try{const e=await d.changeUsername(s);this.successMessage=e.data.message,this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},5e3)}catch(e){this.errorMessage=e.response.data.error,console.log(e.response.data.error),this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},5e3)}}this.usernameDisabled=!this.usernameDisabled},async toggleEmailInput(){if(!this.emailDisabled){const s={email:this.user.email};try{const e=await d.changeEmail(s);this.successMessage=e.data.message,this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},5e3)}catch(e){this.errorMessage=e.response.data.error,console.log(e.response.data.error),this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},5e3)}}this.emailDisabled=!this.emailDisabled},async togglePhoneInput(){if(!this.phoneDisabled){const s={phone:this.user.phone};try{const e=await d.changePhone(s);this.successMessage=e.data.message,this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},5e3)}catch(e){this.errorMessage=e.response.data.error,console.log(e.response.data.error),this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},5e3)}}this.phoneDisabled=!this.phoneDisabled}}},D={style:{color:"black"}},v={key:0,class:"containersettings"},C={style:{"text-align":"center",margin:"10px 0px"}},I={class:"image"},x=["src"],S={style:{"padding-left":"22px"}},E={class:"inputdivi"},T=["disabled"],U={style:{"padding-left":"22px"}},F={class:"inputdivi"},V=["disabled"],j={style:{"padding-left":"22px"}},B={class:"inputdivi"},L=["disabled"],R={style:{"padding-left":"22px"}},A={key:1,class:"success-message"},N={key:2,class:"error-message"};function P(s,e,l,o,a,r){const g=y("ion-icon");return c(),u("main",D,[a.user?(c(),u("div",v,[t("h2",C,n(r.translate("settings").value[0]),1),t("div",I,[t("img",{src:a.user.image,alt:""},null,8,x),a.imageChange?(c(),u("input",{key:0,ref:"imageInput",type:"file",onChange:e[0]||(e[0]=(...i)=>r.handleImageChange&&r.handleImageChange(...i))},null,544)):h("",!0),m(g,{name:a.imageChange?"checkmark-outline":"create-outline",onClick:r.toggleImageInput},null,8,["name","onClick"])]),t("p",S,n(r.translate("settings").value[1]),1),t("div",E,[p(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>a.user.username=i),disabled:a.usernameDisabled},null,8,T),[[_,a.user.username]]),m(g,{name:a.usernameDisabled?"create-outline":"checkmark-outline",onClick:r.toggleUsernameInput},null,8,["name","onClick"])]),t("p",U,n(r.translate("settings").value[2]),1),t("div",F,[p(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>a.user.email=i),disabled:a.emailDisabled},null,8,V),[[_,a.user.email]]),m(g,{name:a.emailDisabled?"create-outline":"checkmark-outline",onClick:r.toggleEmailInput},null,8,["name","onClick"])]),t("p",j,n(r.translate("reference").value[2]),1),t("div",B,[p(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=i=>a.user.phone=i),disabled:a.phoneDisabled},null,8,L),[[_,a.user.phone]]),m(g,{name:a.phoneDisabled?"create-outline":"checkmark-outline",onClick:r.togglePhoneInput},null,8,["name","onClick"])]),t("p",R,n(r.translate("settings").value[3]),1)])):h("",!0),a.showSuccessMessage?(c(),u("div",A,n(a.successMessage),1)):h("",!0),a.showErrorMessage?(c(),u("div",N,n(a.errorMessage),1)):h("",!0)])}const q=f(k,[["render",P],["__scopeId","data-v-2aebdf65"]]);export{q as default};
