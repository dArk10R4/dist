import{_,u as m,e as y,U as f,f as p,o,c as a,a as c,q as d,F as v,r as S,t as n,b as u,l as M}from"./index-a881bc94.js";const w={setup(){const s=m();return y(()=>{s.initializeLocale()}),{translate:r=>M(()=>s.translate(r)).value}},data(){return{user:null,rotation:0,right:0,slices:["2","4","6","8","10","12","14","16"],colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#00bcd4","#009688"],showSuccessMessage:!1,successMessage:"",showErrorMessage:!1,errorMessage:""}},methods:{async spinWheel(){try{const s=await f.draw(),e=s.data.num,r=360/this.slices.length;this.rotation=18e3+e*r,this.right=s.data.wheel,this.successMessage=this.translate("lucky").value[3],this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},5e3)}catch(s){s.response.status===400&&(this.errorMessage=this.translate("lucky").value[2],this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},5e3))}},getSliceStyle(s){const e=360/this.slices.length*s,r=this.colors[s%this.colors.length];return{transform:`rotate(${e}deg)`,backgroundColor:r}}},computed:{rotationStyle(){return{transform:`rotate(${this.rotation}deg)`,transition:"transform 2s ease-in-out"}}},async created(){const s=p();await s.fill(),this.user=s.user,this.right=s.user.wheel}},k={class:"container"},b={class:"inner-slice"},x={class:"right"},E={key:0},B={key:0,class:"success-message"},C={key:1,class:"error-message"};function L(s,e,r,g,t,i){return o(),a("main",null,[c("div",k,[c("div",{class:"wheel",style:d(i.rotationStyle)},[(o(!0),a(v,null,S(t.slices,(l,h)=>(o(),a("div",{class:"slice",key:h,style:d(i.getSliceStyle(h))},[c("div",b,n(l),1)],4))),128))],4),c("div",{class:"spinBtn",onClick:e[0]||(e[0]=(...l)=>i.spinWheel&&i.spinWheel(...l))},"spin")]),c("div",x,[t.user?(o(),a("span",E,n(g.translate("lucky").value[1])+": "+n(t.right),1)):u("",!0)]),t.showSuccessMessage?(o(),a("div",B,n(t.successMessage),1)):u("",!0),t.showErrorMessage?(o(),a("div",C,n(t.errorMessage),1)):u("",!0)])}const W=_(w,[["render",L],["__scopeId","data-v-5bcdc310"]]);export{W as default};
